<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <ui:composition template="/templates/template-jsf.xhtml">
        <ui:define name="title-page">Partner</ui:define>

        <ui:define name="header-append">
            <script src="/app/component/js/partner.js"></script>
            <script src="/app/component/js/purchaseOrder.js?controller.name=purchaseOrderController"></script>
            <!--<script src="js/partner.js"></script>-->
        </ui:define>

        <ui:define name="body-content">
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Partner
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-lg-6" ng-controller="mainController">
                                    <form role="form">
                                        <ng-include src="'/app/component/form/partner/lines'">
                                        </ng-include>
                                        <button type="submit"
                                                ng-click="saveEntity()"
                                                class="btn btn-default">Save
                                        </button>
                                    </form>
                                </div>
                                <div class="col-lg-6" ng-controller="purchaseOrderController">
                                    <form role="form">
                                        <ng-include src="'/app/component/form/purchaseOrder/lines'">
                                        </ng-include>

                                        <div class="form-group">
                                            <label>Partner</label>
                                            <div class="form-group input-group">
                                                <input type="text" class="form-control" 
                                                       ng-autocomplete=""
                                                       ng-model="model.entity.partner" 
                                                       url="/app/rest/partner" 
                                                       label="{{id}} {{name}}" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label>Partner</label>
                                            <div class="form-group input-group">                                            
                                                <input type="text" class="form-control" 
                                                       id="partner-search-autocomplete"
                                                       ng-model="model.entity.partner" 
                                                       autocomplete="off">
                                                </input>
                                                <script>
                                                            var countries = [
                                                                {value: 'Andorra', data: 'AD'},
                                                                {value: 'Zimbabwe', data: 'ZZ'}
                                                            ];

                                                            $('#partner-search-autocomplete').autocomplete({
                                                                source: function (request, response) {
                                                                    $.get("/app/rest/partner", {
                                                                        name: request.term
                                                                    }, function (data) {
                                                                        response($.map(data, function (item) {
                                                                            return {
                                                                                label: item.name,
                                                                                value: item.name,
                                                                                id: item.id
                                                                            };
                                                                        }));
                                                                    });
                                                                },
                                                                onSelect: function (suggestion) {
                                                                    //alert('You selected: ' + suggestion.value + ', ' + suggestion.data);
                                                                }
                                                            });
                                                </script>
                                                <span class="input-group-btn">
                                                    <button class="btn btn-default" type="button">
                                                        <i class="fa fa-search"></i>
                                                    </button>
                                                </span>                                                
                                            </div>
                                        </div>

                                        <button type="submit"
                                                ng-click="saveEntity()"
                                                class="btn btn-default">Save
                                        </button>
                                    </form>
                                </div>
                                <!-- /.col-lg-6 (nested) -->
                            </div>
                            <!-- /.row (nested) -->
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
            </div>
        </ui:define>
    </ui:composition>
</html>
